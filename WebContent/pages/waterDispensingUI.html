<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>
<link rel="stylesheet" href="css/template.css">
<script type = "text/javascript" 
         src = "https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>

<script type = "text/javascript" 
         src = "./js/TestJSFile.js"></script>
<script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
<script>
    $( document ).ready(function() {
        
        setInterval(callAgain, 5000);
        function callAgain()
        {
        	
        	$.ajax({
 			   url: 'http://localhost:8080/hackathon4grammers/rest/handleDispenseRequest/fetchTrips',
 			  	headers: { 
 		           'Accept': 'application/json',
 		           'Content-Type': 'application/json' 
 		       	},
 		        mimeType: 'application/json',
 		      	dataType: "json",
 		        contentType: "application/json",
 			   	success: function(data) {
 				   init(data);
 			   	},
 			   	error: function(data) {
 				   alert("failure");
 			   	},
 			   	type: 'POST'
 			});
        }
    });
 
</script>
<script type="text/javascript">
    function init(responseText) 
    {
    	var dataTable = document.getElementById("requestTable");
    	dataTable.style.visibility="visible";
    	var row1 = dataTable.insertRow();
        
        var cell00 = row1.insertCell();
        var cell01 = row1.insertCell();
        var cell02 = row1.insertCell();
        var cell03 = row1.insertCell();

        cell00.innerHTML = responseText.truckNumber;
        cell01.innerHTML = responseText.areaName;
        cell02.innerHTML = responseText.noOfPatches;
        cell03.innerHTML = responseText.waterNeedDispense;
    }
</script>
</head>
<body>
<section>
	<h1>Water Dispensing Screen</h1>
  <div class="tbl-header">
    <table cellpadding="0" cellspacing="0" border="0">
      <thead>
        <tr>
          	<th>Truck Number</th>
    		<th>Area</th> 
    		<th>No of Patches</th>
          	<th>Water to be Filled</th>
        </tr>
      </thead>
    </table>
  </div>
  <div class="tbl-content">
    <table id="requestTable" cellpadding="0" cellspacing="0" border="0">
      <tbody>
      </tbody>
    </table>
  </div>
</section>
</body>
</html>